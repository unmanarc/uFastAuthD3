<!--<%include:/includes/inc.main.header.html%>-->
<!--<%include:/includes/inc.layout.leftpanel.header.html%>-->
<!--<%include:/includes/inc.links.roles.html%>-->
<!--<%include:/includes/inc.layout.leftpanel.middle.html%>-->

<script>
  document.getElementById("apptitle").innerHTML = "Roles &#9658; Roles Directory";
  document.getElementById("mainview-role-directory-link").style.color = "white";

  function ajaxLoadRoleList() {
    var method = "rolesBasicInfoSearch";
    $.ajax({
      url: '/japi_exec?method=' + method,
      headers: { "CSRFToken": csrfToken },
      data: { payload: JSON.stringify({ searchWords: $("#searchField").val(), limit: 0, offset: 0 }) },
      type: 'POST',
      success: function (response) {
        document.getElementById("tbody-ulist").innerHTML = "";
        if (response == null) return;
        let roleId = 0;
        for (let roleInfo of response) {
          let b64RoleName = window.btoa(roleInfo["roleName"]);

          $("#tbody-ulist").append(
            `<tr> 
                <th scope="row" id=ulist-role-${roleId}></th>
                <td id=ulist-description-${roleId}></td>
                <td style="text-align: right;">
                  <button type="button" class="btn btn-dark btn-sm" onclick="window.location='role-edit?${b64RoleName}'">Edit</button>
                  <!--<button type="button" class="btn btn-danger btn-sm" onclick="window.location='role-remove?${b64RoleName}'">Remove</button>-->
                </td>
              </tr>`
          );
          $(`#ulist-role-${roleId}`).text(roleInfo["roleName"]);
          $(`#ulist-description-${roleId}`).text(roleInfo["description"]);
         
          roleId++;
        }
      },
      error: commonFunctionError
    });
  }

  // Default Main View:
  function csrfReady() {
    ajaxLoadRoleList();
  }
</script>

<table width=100% style=" border-spacing: 10px;   border-collapse: separate;">
  <tr><td align="right">
    <input type="text" placeholder="Search Field" onkeyup="javascript:ajaxLoadRoleList();" id="searchField">
    <hr>
  </td></tr>
</table>

<table class="table table-hover">
    <thead class="thead-dark">
      <tr bgcolor=black>
        <th scope="col">Role Name</th>
        <th scope="col">Description</th>
        <th scope="col" style="text-align: right;">Controls&nbsp;</th>
      </tr>
    </thead>
    <tbody id="tbody-ulist">     
    </tbody>
  </table>


<!--<%include:/includes/inc.layout.leftpanel.footer.html%>-->
<!--<%include:/includes/inc.main.footer.html%>-->
